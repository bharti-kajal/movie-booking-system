{
  "openapi": "3.0.0",
  "info": {
    "title": "Movie Booking System API",
    "version": "1.0.0",
    "description": "API for Movie Booking System with JWT Authentication"
  },
  "servers": [
    {
      "url": "http://localhost:3200"
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "User registration and login"
    },
    {
      "name": "Movies",
      "description": "Movie management endpoints"
    },
    {
      "name": "Bookings",
      "description": "Movie booking operations"
    }
  ],
  "paths": {
    "/api/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register a new user",
        "description": "Create a new user account with name, email and password",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "string",
                    "example": "john@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  }
                },
                "required": ["name", "email", "password"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "User Created Successfully!"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing fields or email in use",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Email already in use!"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Login user",
        "description": "Authenticate user and return JWT token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "example": "john@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  }
                },
                "required": ["email", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid Credentials"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/movie/add": {
      "post": {
        "tags": ["Movies"],
        "summary": "Add a new movie",
        "description": "Add a new movie to the system (requires authentication)",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string",
                    "example": "Inception"
                  },
                  "description": {
                    "type": "string",
                    "example": "A mind-bending thriller about dreams"
                  },
                  "duration": {
                    "type": "string",
                    "example": "2h 28m"
                  },
                  "genre": {
                    "type": "string",
                    "example": "Sci-Fi"
                  }
                },
                "required": ["title", "description", "duration", "genre"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Movie added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Movie Added Successfully!"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing fields",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Something Went Wrong!"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/movie/update": {
      "post": {
        "tags": ["Movies"],
        "summary": "Update a movie",
        "description": "Update movie details (requires authentication)",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "movieId": {
                    "type": "string",
                    "example": "68468165389d0378d34cfc2c"
                  },
                  "title": {
                    "type": "string",
                    "example": "Inception Updated"
                  },
                  "description": {
                    "type": "string",
                    "example": "Updated description"
                  },
                  "duration": {
                    "type": "string",
                    "example": "2h 30m"
                  },
                  "genre": {
                    "type": "string",
                    "example": "Sci-Fi Thriller"
                  }
                },
                "required": ["movieId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Movie updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Movie Updated Successfully!"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid movieId or missing fields",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Something Went Wrong!"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/movie/delete": {
      "post": {
        "tags": ["Movies"],
        "summary": "Delete a movie",
        "description": "Delete a movie from the system (requires authentication)",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "movieId": {
                    "type": "string",
                    "example": "68468165389d0378d34cfc2c"
                  }
                },
                "required": ["movieId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Movie deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Movie Deleted Successfully!"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid movieId",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "movieId Not correct"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/movie/lists": {
      "get": {
        "tags": ["Movies"],
        "summary": "List all movies",
        "description": "Get paginated list of movies with optional filtering (requires authentication)",
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Page number",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Items per page",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "genre",
            "in": "query",
            "description": "Filter by genre",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "title",
            "in": "query",
            "description": "Filter by title (partial match)",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of movies retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "page": {
                      "type": "integer",
                      "example": 1
                    },
                    "limit": {
                      "type": "integer",
                      "example": 10
                    },
                    "totalCount": {
                      "type": "integer",
                      "example": 25
                    },
                    "totalPages": {
                      "type": "integer",
                      "example": 3
                    },
                    "movies": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string",
                            "example": "68468165389d0378d34cfc2c"
                          },
                          "title": {
                            "type": "string",
                            "example": "Inception"
                          },
                          "description": {
                            "type": "string",
                            "example": "A mind-bending thriller about dreams"
                          },
                          "duration": {
                            "type": "string",
                            "example": "2h 28m"
                          },
                          "genre": {
                            "type": "string",
                            "example": "Sci-Fi"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/movie/booking": {
      "post": {
        "tags": ["Bookings"],
        "summary": "Create a movie booking",
        "description": "Book seats for a movie show (requires authentication)",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "userId": {
                    "type": "string",
                    "example": "68468165389d0378d34cfc2c"
                  },
                  "movieId": {
                    "type": "string",
                    "example": "68468165389d0378d34cfc2c"
                  },
                  "showDate": {
                    "type": "string",
                    "format": "date",
                    "example": "2023-12-25"
                  },
                  "showTime": {
                    "type": "string",
                    "example": "18:00"
                  },
                  "seats": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "example": ["A1", "A2"]
                  },
                  "totalPrice": {
                    "type": "number",
                    "example": 500
                  },
                  "status": {
                    "type": "string",
                    "example": "booked"
                  }
                },
                "required": ["userId", "movieId", "showDate", "showTime", "seats", "totalPrice"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Booking created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Booking created successfully!"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "_id": {
                          "type": "string"
                        },
                        "userId": {
                          "type": "string"
                        },
                        "movieId": {
                          "type": "string"
                        },
                        "showDate": {
                          "type": "string",
                          "format": "date"
                        },
                        "showTime": {
                          "type": "string"
                        },
                        "seats": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "totalPrice": {
                          "type": "number"
                        },
                        "status": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Missing required fields"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token"
          },
          "409": {
            "description": "Conflict - seats already booked",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Some of the selected seats are already booked for this show."
                    },
                    "conflictSeats": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": ["A1"]
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/movie/view-bookings": {
      "get": {
        "tags": ["Bookings"],
        "summary": "View all bookings",
        "description": "Get list of all bookings (requires admin authentication)",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Bookings retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "booked_users": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "_id": {
                            "type": "string"
                          },
                          "userId": {
                            "type": "string"
                          },
                          "movieId": {
                            "type": "string"
                          },
                          "showDate": {
                            "type": "string",
                            "format": "date"
                          },
                          "showTime": {
                            "type": "string"
                          },
                          "seats": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "totalPrice": {
                            "type": "number"
                          },
                          "status": {
                            "type": "string"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - missing or invalid token"
          },
          "403": {
            "description": "Forbidden - requires admin privileges"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token obtained from login endpoint"
      }
    }
  }
}